<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings | GridPilot</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: -apple-system, sans-serif; background-color: #f3f4f6; margin: 0; padding: 0; color: #1e293b; }
        
        .header { background: white; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 10; display: flex; align-items: center; }
        .back-btn { border: none; background: none; font-size: 18px; color: #64748b; cursor: pointer; margin-right: 15px; }
        .header h1 { margin: 0; font-size: 20px; }

        .container { padding: 20px; max-width: 600px; margin: 0 auto; }
        
        .section-title { font-size: 13px; font-weight: 700; color: #64748b; text-transform: uppercase; margin: 25px 0 10px 10px; letter-spacing: 1px; }
        
        .menu-group { background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
        
        .menu-item { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; border-bottom: 1px solid #f1f5f9; cursor: pointer; transition: 0.2s; }
        .menu-item:last-child { border-bottom: none; }
        .menu-item:hover { background: #f8fafc; }
        
        .icon-box { width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-size: 16px; }
        
        /* Icon Colors */
        .bg-blue { background: #dbeafe; color: #2563eb; }
        .bg-green { background: #dcfce7; color: #16a34a; }
        .bg-orange { background: #ffedd5; color: #ea580c; }
        .bg-gray { background: #f1f5f9; color: #64748b; }

        .item-text { flex-grow: 1; font-weight: 500; }
        .arrow { color: #cbd5e1; }
        .value-badge { font-size: 13px; color: #64748b; margin-right: 10px; }

        .logout-btn { display: block; width: 100%; margin-top: 30px; padding: 15px; background: #fee2e2; color: #ef4444; border: none; border-radius: 12px; font-weight: 600; font-size: 16px; cursor: pointer; }
        
        .version-container { text-align: center; margin-top: 40px; color: #94a3b8; font-size: 13px; }
    </style>
</head>
<body>

    <div class="header">
        <button class="back-btn" onclick="window.location.href='index.html'"><i class="fas fa-arrow-left"></i></button>
        <h1>Settings</h1>
    </div>

    <div class="container">

        <div class="section-title">System</div>
        <div class="menu-group">
            <div class="menu-item" onclick="setLocation()">
                <div class="icon-box bg-blue"><i class="fas fa-map-marker-alt"></i></div>
                <div class="item-text">Home Location</div>
                <div class="value-badge" id="location-status">Not Set</div>
                <i class="fas fa-chevron-right arrow"></i>
            </div>
            
            <div class="menu-item">
                <div class="icon-box bg-blue"><i class="fas fa-moon"></i></div>
                <div class="item-text">Dark Mode</div>
                <i class="fas fa-toggle-off arrow"></i>
            </div>
        </div>

        <div class="section-title">Support</div>
        <div class="menu-group">
            <div class="menu-item" onclick="alert('Opening FAQ...')">
                <div class="icon-box bg-green"><i class="fas fa-life-ring"></i></div>
                <div class="item-text">Help Center</div>
                <i class="fas fa-external-link-alt arrow" style="font-size: 12px;"></i>
            </div>
            <div class="menu-item" onclick="window.location.href='mailto:support@gridpilot.com'">
                <div class="icon-box bg-green"><i class="fas fa-envelope"></i></div>
                <div class="item-text">Contact Support</div>
                <i class="fas fa-chevron-right arrow"></i>
            </div>
        </div>

        <div class="section-title">Legal</div>
        <div class="menu-group">
            <div class="menu-item">
                <div class="icon-box bg-gray"><i class="fas fa-shield-alt"></i></div>
                <div class="item-text">Privacy Policy</div>
                <i class="fas fa-chevron-right arrow"></i>
            </div>
            <div class="menu-item">
                <div class="icon-box bg-gray"><i class="fas fa-file-contract"></i></div>
                <div class="item-text">Terms of Service</div>
                <i class="fas fa-chevron-right arrow"></i>
            </div>
        </div>

        <button class="logout-btn" onclick="logout()">Log Out</button>

        <div class="version-container">
            GridPilot v1.0.0 (Beta)<br>
            Designed in Louisville & Cincinnati
        </div>
    </div>

    <script>
        // --- 1. LIVE LOCATION FEATURE ---
        function setLocation() {
            const status = document.getElementById('location-status');
            
            if (!navigator.geolocation) {
                alert("Geolocation is not supported by your browser");
                return;
            }

            status.innerText = "Locating...";

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    // Success!
                    const lat = position.coords.latitude.toFixed(4);
                    const lng = position.coords.longitude.toFixed(4);
                    status.innerText = `${lat}, ${lng}`;
                    alert(`âœ… Success! Home location pinned at:\nLat: ${lat}\nLong: ${lng}`);
                    
                    // TODO: Save this to Firebase later
                },
                (error) => {
                    // Error
                    status.innerText = "Error";
                    alert("Unable to retrieve location. Please allow GPS access.");
                }
            );
        }

        // --- 2. LOGOUT LOGIC ---
        function logout() {
            if(confirm("Log out of GridPilot?")) {
                sessionStorage.removeItem("gridpilot_user");
                window.location.href = "login.html";
            }
        }
    </script>
</body>
</html>